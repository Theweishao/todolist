{"ast":null,"code":"// 初始化state对象\nconst initState = {\n  todos: Array(7).fill(null).map((v, i) => ({\n    id: i,\n    title: 'reducer中标题' + i,\n    completed: false\n  }))\n}; // const initState = sessionStorage.getItem('data') ? JSON.parse(sessionStorage.getItem('data')):{\n//   todos: Array(7).fill(null).map((v, i) => ({\n//     id: i,\n//     title: 'reducer中标题' + i,\n//     completed: false\n//   }))\n// }\n\n/**\r\n * reducer 函数，这个函数是一个纯函数\r\n * @param {*} state 旧的状态数据\r\n * @param {*} action 更新状态的动作对象，{type, payload} type表示动作类型，payload表示操作的数据\r\n * \r\n * @return 更新后的新的状态对象\r\n */\n\nconst reducer = (state = initState, action) => {\n  switch (action.type) {\n    case 'ADD_TODO_ITEM':\n      // 添加新待办事项\n      const adddata = { ...state,\n        todos: [...state.todos, action.payload]\n      };\n      sessionStorage.setItem('data', JSON.stringify(adddata));\n      return adddata;\n\n    case 'TOGGLE_TODO_ITEM':\n      // 修改待办事项状态\n      const toggledata = { ...state,\n        todos: state.todos.map(todo => {\n          const temp = { ...todo\n          }; // 纯函数不能造成副作用，所以将数组中的元素值复制一份再操作\n\n          if (temp.id === action.payload) {\n            temp.completed = !temp.completed;\n          }\n\n          return temp;\n        })\n      };\n      sessionStorage.setItem('data', JSON.stringify(toggledata));\n      return toggledata;\n\n    case 'REMOVE_TODO_ITEM':\n      // 删除待办事项\n      const removedata = { ...state,\n        todos: state.todos.filter(todo => todo.id !== action.payload)\n      };\n      sessionStorage.setItem('data', JSON.stringify(removedata));\n      return removedata;\n\n    case 'CHANGED_TODO_ITEM':\n      // 编辑待办事项内容\n      const changedata = { ...state,\n        todos: state.todos.map(todo => {\n          const temp = { ...todo\n          }; // 纯函数不能造成副作用，所以将数组中的元素值复制一份再操作\n\n          if (temp.id === action.payload.id) {\n            temp.title = action.payload.title;\n          }\n\n          return temp;\n        })\n      };\n      console.log(changedata);\n      sessionStorage.setItem('data', JSON.stringify(changedata));\n      return changedata;\n    // return {\n    //   ...state,\n    //   todos: state.todos.map(todo => {\n    //     const temp = {...todo} // 纯函数不能造成副作用，所以将数组中的元素值复制一份再操作\n    //     if (temp.id === action.payload.id) {\n    //       temp.title = action.payload.title\n    //     }\n    //     return temp\n    //   })\n    // }\n\n    default:\n      // 没有满足条件的动作，则直接返回原状态值\n      return state;\n  }\n};\n\nexport default reducer;","map":{"version":3,"sources":["G:/HBproject/The third stage/React/h52005-react/To-do-list/src/reducers/todos.js"],"names":["initState","todos","Array","fill","map","v","i","id","title","completed","reducer","state","action","type","adddata","payload","sessionStorage","setItem","JSON","stringify","toggledata","todo","temp","removedata","filter","changedata","console","log"],"mappings":"AAAA;AACA,MAAMA,SAAS,GAAG;AAChBC,EAAAA,KAAK,EAAEC,KAAK,CAAC,CAAD,CAAL,CAASC,IAAT,CAAc,IAAd,EAAoBC,GAApB,CAAwB,CAACC,CAAD,EAAIC,CAAJ,MAAW;AACxCC,IAAAA,EAAE,EAAED,CADoC;AAExCE,IAAAA,KAAK,EAAE,eAAeF,CAFkB;AAGxCG,IAAAA,SAAS,EAAE;AAH6B,GAAX,CAAxB;AADS,CAAlB,C,CAOA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,MAAMC,OAAO,GAAG,CAACC,KAAK,GAAGX,SAAT,EAAoBY,MAApB,KAA+B;AAC7C,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,eAAL;AAAsB;AACpB,YAAMC,OAAO,GAAG,EACd,GAAGH,KADW;AAEdV,QAAAA,KAAK,EAAE,CACL,GAAGU,KAAK,CAACV,KADJ,EAELW,MAAM,CAACG,OAFF;AAFO,OAAhB;AAOAC,MAAAA,cAAc,CAACC,OAAf,CAAuB,MAAvB,EAA8BC,IAAI,CAACC,SAAL,CAAeL,OAAf,CAA9B;AACA,aAAOA,OAAP;;AACF,SAAK,kBAAL;AAAyB;AACvB,YAAMM,UAAU,GAAG,EACjB,GAAGT,KADc;AAEjBV,QAAAA,KAAK,EAAEU,KAAK,CAACV,KAAN,CAAYG,GAAZ,CAAgBiB,IAAI,IAAI;AAC7B,gBAAMC,IAAI,GAAG,EAAC,GAAGD;AAAJ,WAAb,CAD6B,CACN;;AACvB,cAAIC,IAAI,CAACf,EAAL,KAAYK,MAAM,CAACG,OAAvB,EAAgC;AAC9BO,YAAAA,IAAI,CAACb,SAAL,GAAiB,CAACa,IAAI,CAACb,SAAvB;AACD;;AACD,iBAAOa,IAAP;AACD,SANM;AAFU,OAAnB;AAUAN,MAAAA,cAAc,CAACC,OAAf,CAAuB,MAAvB,EAA8BC,IAAI,CAACC,SAAL,CAAeC,UAAf,CAA9B;AACA,aAAOA,UAAP;;AACF,SAAK,kBAAL;AAAyB;AACvB,YAAMG,UAAU,GAAG,EACjB,GAAGZ,KADc;AAEjBV,QAAAA,KAAK,EAAEU,KAAK,CAACV,KAAN,CAAYuB,MAAZ,CAAmBH,IAAI,IAAIA,IAAI,CAACd,EAAL,KAAYK,MAAM,CAACG,OAA9C;AAFU,OAAnB;AAIAC,MAAAA,cAAc,CAACC,OAAf,CAAuB,MAAvB,EAA8BC,IAAI,CAACC,SAAL,CAAeI,UAAf,CAA9B;AACA,aAAOA,UAAP;;AACF,SAAK,mBAAL;AAA0B;AACxB,YAAME,UAAU,GAAC,EACf,GAAGd,KADY;AAEbV,QAAAA,KAAK,EAAEU,KAAK,CAACV,KAAN,CAAYG,GAAZ,CAAgBiB,IAAI,IAAI;AAC7B,gBAAMC,IAAI,GAAG,EAAC,GAAGD;AAAJ,WAAb,CAD6B,CACN;;AACvB,cAAIC,IAAI,CAACf,EAAL,KAAYK,MAAM,CAACG,OAAP,CAAeR,EAA/B,EAAmC;AACjCe,YAAAA,IAAI,CAACd,KAAL,GAAaI,MAAM,CAACG,OAAP,CAAeP,KAA5B;AACD;;AACD,iBAAOc,IAAP;AACD,SANM;AAFM,OAAjB;AAUAI,MAAAA,OAAO,CAACC,GAAR,CAAYF,UAAZ;AACAT,MAAAA,cAAc,CAACC,OAAf,CAAuB,MAAvB,EAA8BC,IAAI,CAACC,SAAL,CAAeM,UAAf,CAA9B;AACA,aAAOA,UAAP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACF;AAAS;AACP,aAAOd,KAAP;AAxDJ;AA0DD,CA3DD;;AA6DA,eAAeD,OAAf","sourcesContent":["// 初始化state对象\r\nconst initState = {\r\n  todos: Array(7).fill(null).map((v, i) => ({\r\n    id: i,\r\n    title: 'reducer中标题' + i,\r\n    completed: false\r\n  }))\r\n}\r\n// const initState = sessionStorage.getItem('data') ? JSON.parse(sessionStorage.getItem('data')):{\r\n//   todos: Array(7).fill(null).map((v, i) => ({\r\n//     id: i,\r\n//     title: 'reducer中标题' + i,\r\n//     completed: false\r\n//   }))\r\n// }\r\n  \r\n\r\n/**\r\n * reducer 函数，这个函数是一个纯函数\r\n * @param {*} state 旧的状态数据\r\n * @param {*} action 更新状态的动作对象，{type, payload} type表示动作类型，payload表示操作的数据\r\n * \r\n * @return 更新后的新的状态对象\r\n */\r\nconst reducer = (state = initState, action) => {\r\n  switch (action.type) {\r\n    case 'ADD_TODO_ITEM': // 添加新待办事项\r\n      const adddata = {\r\n        ...state,\r\n        todos: [\r\n          ...state.todos,\r\n          action.payload\r\n        ],\r\n      }\r\n      sessionStorage.setItem('data',JSON.stringify(adddata))\r\n      return adddata\r\n    case 'TOGGLE_TODO_ITEM': // 修改待办事项状态\r\n      const toggledata = {\r\n        ...state,\r\n        todos: state.todos.map(todo => {\r\n          const temp = {...todo} // 纯函数不能造成副作用，所以将数组中的元素值复制一份再操作\r\n          if (temp.id === action.payload) {\r\n            temp.completed = !temp.completed\r\n          }\r\n          return temp\r\n        })\r\n      }\r\n      sessionStorage.setItem('data',JSON.stringify(toggledata))\r\n      return toggledata\r\n    case 'REMOVE_TODO_ITEM': // 删除待办事项\r\n      const removedata = {\r\n        ...state,\r\n        todos: state.todos.filter(todo => todo.id !== action.payload)\r\n      }\r\n      sessionStorage.setItem('data',JSON.stringify(removedata))\r\n      return removedata\r\n    case 'CHANGED_TODO_ITEM': // 编辑待办事项内容\r\n      const changedata={\r\n        ...state,\r\n          todos: state.todos.map(todo => {\r\n            const temp = {...todo} // 纯函数不能造成副作用，所以将数组中的元素值复制一份再操作\r\n            if (temp.id === action.payload.id) {\r\n              temp.title = action.payload.title\r\n            }\r\n            return temp\r\n          })\r\n      }\r\n      console.log(changedata)\r\n      sessionStorage.setItem('data',JSON.stringify(changedata))\r\n      return changedata\r\n      // return {\r\n      //   ...state,\r\n      //   todos: state.todos.map(todo => {\r\n      //     const temp = {...todo} // 纯函数不能造成副作用，所以将数组中的元素值复制一份再操作\r\n      //     if (temp.id === action.payload.id) {\r\n      //       temp.title = action.payload.title\r\n      //     }\r\n      //     return temp\r\n      //   })\r\n      // }\r\n    default: // 没有满足条件的动作，则直接返回原状态值\r\n      return state\r\n  }\r\n}\r\n\r\nexport default reducer\r\n"]},"metadata":{},"sourceType":"module"}